# System Architecture - TheAIColab DEWA Customer Support Platform

**Document Version**: 1.0  
**Last Updated**: January 28, 2026  
**Status**: Production-Ready MVP

---

## ğŸ“‹ Table of Contents

1. [Executive Summary](#executive-summary)
2. [High-Level Architecture](#high-level-architecture)
3. [Component Architecture](#component-architecture)
4. [Data Architecture](#data-architecture)
5. [AI/ML Architecture](#aiml-architecture)
6. [Security Architecture](#security-architecture)
7. [Deployment Architecture](#deployment-architecture)
8. [Integration Architecture](#integration-architecture)
9. [Scalability & Performance](#scalability--performance)
10. [Technology Stack](#technology-stack)

---

## Executive Summary

TheAIColab is an AI-powered customer support platform for DEWA (Dubai Electricity and Water Authority) that combines proactive guidance, omnichannel chatbot capabilities, predictive analytics, and back-office automation with human oversight.

### Key Architecture Principles
- **Microservices-Ready**: Modular design with clear service boundaries
- **AI-First**: Unified AI Brain orchestrates all intelligent features
- **Bilingual**: Native English/Arabic support with RTL layouts
- **Security-First**: MFA authentication, JWT tokens, audit logging
- **Cloud-Native**: Containerized with Docker, ready for Azure/AWS
- **API-Driven**: RESTful APIs for all operations

---

## High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CLIENT LAYER                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   Web App    â”‚  â”‚  Mobile App  â”‚  â”‚   Chat Bot   â”‚          â”‚
â”‚  â”‚  (React SPA) â”‚  â”‚   (Future)   â”‚  â”‚  (Voice/Text)â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                                     â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                                     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTPS/WSS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API GATEWAY LAYER                            â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚            â”‚   Express.js API Server        â”‚                   â”‚
â”‚            â”‚   - CORS handling              â”‚                   â”‚
â”‚            â”‚   - Request validation         â”‚                   â”‚
â”‚            â”‚   - JWT authentication         â”‚                   â”‚
â”‚            â”‚   - Rate limiting              â”‚                   â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚               â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Authentication  â”‚ â”‚  Business  â”‚ â”‚  AI Services â”‚
â”‚     Service      â”‚ â”‚   Logic    â”‚ â”‚              â”‚
â”‚  - Login/Logout  â”‚ â”‚  Services  â”‚ â”‚ Unified Brainâ”‚
â”‚  - MFA/OTP       â”‚ â”‚            â”‚ â”‚              â”‚
â”‚  - JWT tokens    â”‚ â”‚            â”‚ â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚         â”‚                â”‚         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚Customer  â”‚ â”‚Proactive â”‚  â”‚ Chatbot   â”‚ â”‚Back Officeâ”‚
        â”‚Summary   â”‚ â”‚Guidance  â”‚  â”‚ Service   â”‚ â”‚ Service   â”‚
        â”‚Service   â”‚ â”‚Service   â”‚  â”‚           â”‚ â”‚           â”‚
        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
              â”‚           â”‚              â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA ACCESS LAYER                            â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚              â”‚   Data Access Service    â”‚                       â”‚
â”‚              â”‚   - JSON file operations â”‚                       â”‚
â”‚              â”‚   - Cache management     â”‚                       â”‚
â”‚              â”‚   - Data validation      â”‚                       â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PERSISTENCE LAYER                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚customers.json â”‚  â”‚ tickets.json â”‚  â”‚ ai-logs.json â”‚        â”‚
â”‚  â”‚(Customer data)â”‚  â”‚ (Requests)   â”‚  â”‚(AI tracking) â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                 â”‚
â”‚  Future: PostgreSQL / MongoDB / Azure Cosmos DB                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXTERNAL SERVICES                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   OpenAI     â”‚  â”‚ Email Serviceâ”‚  â”‚  DEWA Portal â”‚         â”‚
â”‚  â”‚  (GPT-3.5)   â”‚  â”‚  (Nodemailer)â”‚  â”‚  (Payment)   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MONITORING & LOGGING                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚Winston Loggerâ”‚  â”‚ Error Logs   â”‚  â”‚Combined Logs â”‚         â”‚
â”‚  â”‚  (Structured)â”‚  â”‚  (error.log) â”‚  â”‚(combined.log)â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â”‚  Future: Application Insights / CloudWatch / Datadog           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Architecture

### 1. Frontend Layer (React 18 SPA)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       FRONTEND ARCHITECTURE                      â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    App.jsx (Router)                     â”‚    â”‚
â”‚  â”‚  - React Router v6                                      â”‚    â”‚
â”‚  â”‚  - Authentication state management                      â”‚    â”‚
â”‚  â”‚  - Route guards                                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Presentation Components                              â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚  Login      â”‚  â”‚  Customer    â”‚  â”‚  Request     â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  - MFA/OTP  â”‚  â”‚  Summary     â”‚  â”‚  Form        â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  - Features â”‚  â”‚  - Charts    â”‚  â”‚  - AI Guide  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚    Showcase â”‚  â”‚  - Customer  â”‚  â”‚  - Dropdown  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚             â”‚  â”‚    360 View  â”‚  â”‚    Explains  â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚  Chatbot    â”‚  â”‚  Dashboard   â”‚  â”‚  Bill        â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  - STT/TTS  â”‚  â”‚  - Analytics â”‚  â”‚  Payment     â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  - Chat UI  â”‚  â”‚  - Cost      â”‚  â”‚  - Iframe    â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  - Submit   â”‚  â”‚    Savings   â”‚  â”‚    Embed     â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚               Shared Components                          â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  - LanguageSwitcher (i18next)                           â”‚  â”‚
â”‚  â”‚  - Loading States                                        â”‚  â”‚
â”‚  â”‚  - Error Boundaries                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                 State Management                         â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  - React Context (Language)                             â”‚  â”‚
â”‚  â”‚  - Local Storage (Auth tokens, Customer data)          â”‚  â”‚
â”‚  â”‚  - Component State (Forms, UI)                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Internationalization (i18n)                 â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  - react-i18next with 5 namespaces                      â”‚  â”‚
â”‚  â”‚  - RTL support for Arabic                               â”‚  â”‚
â”‚  â”‚  - Dynamic language switching                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  HTTP Client Layer                       â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  - Axios for API calls                                   â”‚  â”‚
â”‚  â”‚  - JWT token injection                                   â”‚  â”‚
â”‚  â”‚  - Error handling                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Backend Layer (Node.js/Express)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND ARCHITECTURE                        â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   Express Server                        â”‚    â”‚
â”‚  â”‚  server.js                                              â”‚    â”‚
â”‚  â”‚  - CORS configuration                                   â”‚    â”‚
â”‚  â”‚  - Body parsing                                         â”‚    â”‚
â”‚  â”‚  - Request logging (Winston)                           â”‚    â”‚
â”‚  â”‚  - Error handling middleware                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                  Route Layer                           â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚ auth.js      â”‚  â”‚ customer.js  â”‚  â”‚ proactive.jsâ”‚ â”‚    â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ POST /login  â”‚  â”‚ GET /summary â”‚  â”‚ POST /guide â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ POST /verify â”‚  â”‚              â”‚  â”‚ POST /explainâ”‚ â”‚    â”‚
â”‚  â”‚  â”‚ POST /resend â”‚  â”‚              â”‚  â”‚             â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚    â”‚
â”‚  â”‚  â”‚ chatbot.js   â”‚  â”‚backoffice.js â”‚                   â”‚    â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚                   â”‚    â”‚
â”‚  â”‚  â”‚ POST /query  â”‚  â”‚ GET /tickets â”‚                   â”‚    â”‚
â”‚  â”‚  â”‚ POST /submit â”‚  â”‚ POST /submit â”‚                   â”‚    â”‚
â”‚  â”‚  â”‚              â”‚  â”‚ GET /analyticsâ”‚                  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   Service Layer                          â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚
â”‚  â”‚  â”‚ otpService.js    â”‚  â”‚ emailService.js  â”‚            â”‚  â”‚
â”‚  â”‚  â”‚                  â”‚  â”‚                  â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ - Generate OTP   â”‚  â”‚ - Send OTP email â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ - Validate OTP   â”‚  â”‚ - Templates      â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ - Rate limiting  â”‚  â”‚ - Nodemailer     â”‚            â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  AI Service Layer                        â”‚  â”‚
â”‚  â”‚              (Unified Brain Orchestration)               â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚             unifiedBrain.js                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚         (Central AI Coordinator)                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - getCustomerInsights()                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - analyzeRequest()                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - generateGuidance()                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - analyzeConsumption()                          â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                  â”‚                                       â”‚  â”‚
â”‚  â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚  â”‚
â”‚  â”‚        â”‚         â”‚         â”‚                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚
â”‚  â”‚  â”‚ Intent  â”‚ â”‚Empathyâ”‚ â”‚Proactiveâ”‚ â”‚  Bill    â”‚        â”‚  â”‚
â”‚  â”‚  â”‚Detectionâ”‚ â”‚Responseâ”‚ â”‚ Advisor â”‚ â”‚Predictor â”‚        â”‚  â”‚
â”‚  â”‚  â”‚         â”‚ â”‚       â”‚ â”‚         â”‚ â”‚          â”‚        â”‚  â”‚
â”‚  â”‚  â”‚- Classifyâ”‚ â”‚-Tone  â”‚ â”‚-Guidanceâ”‚ â”‚-Forecast â”‚        â”‚  â”‚
â”‚  â”‚  â”‚- Routing â”‚ â”‚-Contextâ”‚ â”‚-Prevent â”‚ â”‚-Trend   â”‚        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚  â”‚
â”‚  â”‚  â”‚ Sentiment     â”‚  â”‚ Knowledge Graph â”‚                â”‚  â”‚
â”‚  â”‚  â”‚ Analysis      â”‚  â”‚                 â”‚                â”‚  â”‚
â”‚  â”‚  â”‚               â”‚  â”‚ - Entity linkingâ”‚                â”‚  â”‚
â”‚  â”‚  â”‚ - NLP         â”‚  â”‚ - Context aware â”‚                â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Data Access Layer (DAL)                     â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  - File system operations (fs/promises)                 â”‚  â”‚
â”‚  â”‚  - JSON parsing and serialization                       â”‚  â”‚
â”‚  â”‚  - Data validation                                       â”‚  â”‚
â”‚  â”‚  - Error handling                                        â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  Future: ORM/ODM (Prisma, TypeORM, Mongoose)           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Middleware Layer                            â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  - JWT Authentication                                    â”‚  â”‚
â”‚  â”‚  - Request validation                                    â”‚  â”‚
â”‚  â”‚  - Error handler                                         â”‚  â”‚
â”‚  â”‚  - Logger middleware                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Architecture

### Data Models

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATA MODELS                              â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Customer Model                       â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  {                                                      â”‚    â”‚
â”‚  â”‚    id: string                      // C12345           â”‚    â”‚
â”‚  â”‚    name: string                    // "Ahmed Mansoori" â”‚    â”‚
â”‚  â”‚    email: string                   // Primary key      â”‚    â”‚
â”‚  â”‚    businessPartner: string         // BP ID            â”‚    â”‚
â”‚  â”‚    businessPartnerName: string                         â”‚    â”‚
â”‚  â”‚    contractAccounts: [             // Array of accountsâ”‚    â”‚
â”‚  â”‚      {                                                  â”‚    â”‚
â”‚  â”‚        accountNumber: string                           â”‚    â”‚
â”‚  â”‚        accountType: string         // Residential/Comm â”‚    â”‚
â”‚  â”‚        address: string                                 â”‚    â”‚
â”‚  â”‚        outstandingAmount: number   // In AED          â”‚    â”‚
â”‚  â”‚        services: [                 // Electricity/Waterâ”‚    â”‚
â”‚  â”‚          {                                              â”‚    â”‚
â”‚  â”‚            type: string                                â”‚    â”‚
â”‚  â”‚            status: string                              â”‚    â”‚
â”‚  â”‚            meterNumber: string                         â”‚    â”‚
â”‚  â”‚          }                                              â”‚    â”‚
â”‚  â”‚        ]                                                â”‚    â”‚
â”‚  â”‚      }                                                  â”‚    â”‚
â”‚  â”‚    ],                                                   â”‚    â”‚
â”‚  â”‚    totalOutstandingDues: number                        â”‚    â”‚
â”‚  â”‚    lastBill: number                                     â”‚    â”‚
â”‚  â”‚    billDueDate: string                                 â”‚    â”‚
â”‚  â”‚    consumptionHistory: [           // Time series     â”‚    â”‚
â”‚  â”‚      {                                                  â”‚    â”‚
â”‚  â”‚        month: string,              // "2024-12"       â”‚    â”‚
â”‚  â”‚        consumption: number,        // kWh             â”‚    â”‚
â”‚  â”‚        amount: number              // AED             â”‚    â”‚
â”‚  â”‚      }                                                  â”‚    â”‚
â”‚  â”‚    ],                                                   â”‚    â”‚
â”‚  â”‚    accountHealth: {                                    â”‚    â”‚
â”‚  â”‚      status: string,               // excellent/good  â”‚    â”‚
â”‚  â”‚      score: number,                // 0-100           â”‚    â”‚
â”‚  â”‚      paymentHistory: string        // on-time/late    â”‚    â”‚
â”‚  â”‚    },                                                   â”‚    â”‚
â”‚  â”‚    usagePatterns: {                                    â”‚    â”‚
â”‚  â”‚      highConsumptionReason: string                     â”‚    â”‚
â”‚  â”‚      peakHours: string                                 â”‚    â”‚
â”‚  â”‚      comparedToSimilar: string                         â”‚    â”‚
â”‚  â”‚    },                                                   â”‚    â”‚
â”‚  â”‚    aiRecommendations: [            // Personalized    â”‚    â”‚
â”‚  â”‚      {                                                  â”‚    â”‚
â”‚  â”‚        title: string,                                  â”‚    â”‚
â”‚  â”‚        description: string,                            â”‚    â”‚
â”‚  â”‚        impact: string              // high/medium/low â”‚    â”‚
â”‚  â”‚      }                                                  â”‚    â”‚
â”‚  â”‚    ]                                                    â”‚    â”‚
â”‚  â”‚  }                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                     Ticket Model                        â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  {                                                      â”‚    â”‚
â”‚  â”‚    id: string                      // TKT-timestamp    â”‚    â”‚
â”‚  â”‚    customerId: string              // Foreign key      â”‚    â”‚
â”‚  â”‚    customerName: string                                â”‚    â”‚
â”‚  â”‚    type: string                    // billing_inquiry  â”‚    â”‚
â”‚  â”‚    subject: string                                     â”‚    â”‚
â”‚  â”‚    description: string                                 â”‚    â”‚
â”‚  â”‚    status: string                  // Pending/Resolved â”‚    â”‚
â”‚  â”‚    priority: string                // High/Medium/Low  â”‚    â”‚
â”‚  â”‚    createdAt: string              // ISO 8601         â”‚    â”‚
â”‚  â”‚    updatedAt: string                                   â”‚    â”‚
â”‚  â”‚    assignedTo: string             // Agent ID         â”‚    â”‚
â”‚  â”‚    resolution: string             // Resolution notes â”‚    â”‚
â”‚  â”‚    aiGuidance: {                  // AI context       â”‚    â”‚
â”‚  â”‚      confidence: number,                               â”‚    â”‚
â”‚  â”‚      recommendations: array,                           â”‚    â”‚
â”‚  â”‚      analysis: object                                  â”‚    â”‚
â”‚  â”‚    }                                                    â”‚    â”‚
â”‚  â”‚  }                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   AI Log Model                          â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  {                                                      â”‚    â”‚
â”‚  â”‚    id: string                      // LOG-timestamp    â”‚    â”‚
â”‚  â”‚    timestamp: string              // ISO 8601         â”‚    â”‚
â”‚  â”‚    customerId: string                                  â”‚    â”‚
â”‚  â”‚    customerName: string                                â”‚    â”‚
â”‚  â”‚    intent: string                  // billing/service  â”‚    â”‚
â”‚  â”‚    query: string                   // User input       â”‚    â”‚
â”‚  â”‚    aiResponse: string             // AI output        â”‚    â”‚
â”‚  â”‚    sentiment: string              // positive/negative â”‚    â”‚
â”‚  â”‚    confidence: number             // 0-1              â”‚    â”‚
â”‚  â”‚    ticketCreated: boolean                              â”‚    â”‚
â”‚  â”‚    ticketId: string               // If escalated     â”‚    â”‚
â”‚  â”‚    language: string               // en/ar            â”‚    â”‚
â”‚  â”‚    channel: string                // web/chat/mobile  â”‚    â”‚
â”‚  â”‚    deflected: boolean             // Issue resolved   â”‚    â”‚
â”‚  â”‚  }                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DATA FLOW                                 â”‚
â”‚                                                                  â”‚
â”‚   User Login                                                     â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [1] POST /api/auth/login                              â”‚
â”‚      â”‚      Input: {email, password}                            â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [2] Validate credentials (bcrypt)                     â”‚
â”‚      â”‚      customers.json lookup                               â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [3] Generate OTP (6 digits)                           â”‚
â”‚      â”‚      Store in memory (5 min TTL)                         â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [4] Send OTP email                                    â”‚
â”‚      â”‚      Nodemailer â†’ User's email                           â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [5] POST /api/auth/verify-otp                         â”‚
â”‚      â”‚      Input: {email, otp}                                 â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [6] Validate OTP                                      â”‚
â”‚      â”‚      Check expiration, match code                        â”‚
â”‚      â”‚                                                           â”‚
â”‚      â””â”€â†’ [7] Issue JWT tokens                                  â”‚
â”‚           Response: {token, refreshToken, customer}             â”‚
â”‚                                                                  â”‚
â”‚   Customer Summary Request                                      â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [1] GET /api/customer/summary/:id                     â”‚
â”‚      â”‚      Headers: {Authorization: Bearer <JWT>}              â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [2] Validate JWT token                                â”‚
â”‚      â”‚      Verify signature, check expiration                  â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [3] Load customer data                                â”‚
â”‚      â”‚      customers.json â†’ Parse customer record              â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [4] Call unifiedBrain.getCustomerInsights()           â”‚
â”‚      â”‚      â””â”€â†’ Analyze consumption history                     â”‚
â”‚      â”‚          OpenAI API call (if key present)                â”‚
â”‚      â”‚          â””â”€â†’ Generate predictions                        â”‚
â”‚      â”‚          â””â”€â†’ Create recommendations                      â”‚
â”‚      â”‚          â””â”€â†’ Calculate health score                      â”‚
â”‚      â”‚                                                           â”‚
â”‚      â””â”€â†’ [5] Return enriched data                              â”‚
â”‚           Response: {customer, aiInsights, predictions}          â”‚
â”‚                                                                  â”‚
â”‚   AI Guidance Request                                           â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [1] POST /api/proactive/guidance                      â”‚
â”‚      â”‚      Input: {customerId, requestType, description}       â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [2] Load customer context                             â”‚
â”‚      â”‚      customers.json + tickets.json                       â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [3] Call unifiedBrain.analyzeRequest()                â”‚
â”‚      â”‚      â””â”€â†’ Intent detection                                â”‚
â”‚      â”‚      â””â”€â†’ Duplicate check (tickets.json)                  â”‚
â”‚      â”‚      â””â”€â†’ OpenAI analysis (if available)                  â”‚
â”‚      â”‚      â””â”€â†’ Generate recommendations                        â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [4] Log AI interaction                                â”‚
â”‚      â”‚      Append to ai-logs.json                              â”‚
â”‚      â”‚                                                           â”‚
â”‚      â””â”€â†’ [5] Return guidance                                   â”‚
â”‚           Response: {confidence, shouldSubmit, analysis, recs}   â”‚
â”‚                                                                  â”‚
â”‚   Ticket Submission                                             â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [1] POST /api/backoffice/submit                       â”‚
â”‚      â”‚      Input: {customer, type, subject, description}       â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [2] Generate ticket ID                                â”‚
â”‚      â”‚      Format: TKT-{timestamp}                             â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [3] Create ticket record                              â”‚
â”‚      â”‚      Append to tickets.json                              â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [4] Update AI log                                     â”‚
â”‚      â”‚      Mark as escalated, link ticket ID                   â”‚
â”‚      â”‚                                                           â”‚
â”‚      â””â”€â†’ [5] Return ticket confirmation                        â”‚
â”‚           Response: {ticketId, status, estimatedResolution}     â”‚
â”‚                                                                  â”‚
â”‚   Chat Query                                                    â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [1] POST /api/chatbot/query                           â”‚
â”‚      â”‚      Input: {customerId, message, language}              â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [2] Intent detection                                  â”‚
â”‚      â”‚      unifiedBrain â†’ intentDetection.js                   â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [3] Context loading                                   â”‚
â”‚      â”‚      customers.json + tickets.json                       â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [4] Generate response                                 â”‚
â”‚      â”‚      â””â”€â†’ Empathy module (tone)                           â”‚
â”‚      â”‚      â””â”€â†’ OpenAI (content)                                â”‚
â”‚      â”‚      â””â”€â†’ Knowledge graph (facts)                         â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€â†’ [5] Log interaction                                   â”‚
â”‚      â”‚      Append to ai-logs.json                              â”‚
â”‚      â”‚                                                           â”‚
â”‚      â””â”€â†’ [6] Return response                                   â”‚
â”‚           Response: {reply, intent, sentiment, suggestions}     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## AI/ML Architecture

### Unified AI Brain - Core Intelligence Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UNIFIED AI BRAIN ARCHITECTURE                 â”‚
â”‚                                                                  â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚                    â”‚   unifiedBrain.js     â”‚                    â”‚
â”‚                    â”‚  (Orchestrator)       â”‚                    â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                â”‚                                 â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚              â”‚                 â”‚                 â”‚              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚ Intent         â”‚  â”‚ Empathy       â”‚  â”‚ Proactive   â”‚     â”‚
â”‚    â”‚ Detection      â”‚  â”‚ Response      â”‚  â”‚ Advisor     â”‚     â”‚
â”‚    â”‚                â”‚  â”‚               â”‚  â”‚             â”‚     â”‚
â”‚    â”‚ - Query        â”‚  â”‚ - Tone        â”‚  â”‚ - Duplicate â”‚     â”‚
â”‚    â”‚   classificationâ”‚  â”‚   matching    â”‚  â”‚   detection â”‚     â”‚
â”‚    â”‚ - Keyword      â”‚  â”‚ - Name        â”‚  â”‚ - Known     â”‚     â”‚
â”‚    â”‚   matching     â”‚  â”‚   personalizationâ”‚  issues     â”‚     â”‚
â”‚    â”‚ - Context      â”‚  â”‚ - Sentiment   â”‚  â”‚ - Bill      â”‚     â”‚
â”‚    â”‚   extraction   â”‚  â”‚   analysis    â”‚  â”‚   analysis  â”‚     â”‚
â”‚    â”‚                â”‚  â”‚ - Bilingual   â”‚  â”‚ - Guidance  â”‚     â”‚
â”‚    â”‚ Confidence:    â”‚  â”‚   support     â”‚  â”‚   scoring   â”‚     â”‚
â”‚    â”‚   0.7-0.95     â”‚  â”‚               â”‚  â”‚             â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚ Bill Predictor â”‚  â”‚ Sentiment     â”‚  â”‚ Knowledge   â”‚     â”‚
â”‚    â”‚                â”‚  â”‚ Analysis      â”‚  â”‚ Graph       â”‚     â”‚
â”‚    â”‚ - Time series  â”‚  â”‚               â”‚  â”‚             â”‚     â”‚
â”‚    â”‚   analysis     â”‚  â”‚ - NLP scoring â”‚  â”‚ - Entity    â”‚     â”‚
â”‚    â”‚ - Trend        â”‚  â”‚ - Positive/   â”‚  â”‚   linking   â”‚     â”‚
â”‚    â”‚   detection    â”‚  â”‚   Negative    â”‚  â”‚ - DEWA      â”‚     â”‚
â”‚    â”‚ - Variance     â”‚  â”‚ - Urgency     â”‚  â”‚   services  â”‚     â”‚
â”‚    â”‚   calculation  â”‚  â”‚   detection   â”‚  â”‚ - Context   â”‚     â”‚
â”‚    â”‚ - Confidence   â”‚  â”‚               â”‚  â”‚   aware     â”‚     â”‚
â”‚    â”‚   score        â”‚  â”‚               â”‚  â”‚             â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚           External AI Services                       â”‚    â”‚
â”‚    â”‚                                                       â”‚    â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚    â”‚  â”‚         OpenAI GPT-3.5-turbo              â”‚     â”‚    â”‚
â”‚    â”‚  â”‚                                            â”‚     â”‚    â”‚
â”‚    â”‚  â”‚  Use Cases:                                â”‚     â”‚    â”‚
â”‚    â”‚  â”‚  - Advanced consumption analysis           â”‚     â”‚    â”‚
â”‚    â”‚  â”‚  - Personalized recommendations            â”‚     â”‚    â”‚
â”‚    â”‚  â”‚  - Bill prediction (ML-enhanced)           â”‚     â”‚    â”‚
â”‚    â”‚  â”‚  - Complex query understanding             â”‚     â”‚    â”‚
â”‚    â”‚  â”‚  - Context-aware responses                 â”‚     â”‚    â”‚
â”‚    â”‚  â”‚                                            â”‚     â”‚    â”‚
â”‚    â”‚  â”‚  Fallback: Rule-based AI (local)          â”‚     â”‚    â”‚
â”‚    â”‚  â”‚  - Pattern matching                        â”‚     â”‚    â”‚
â”‚    â”‚  â”‚  - Keyword analysis                        â”‚     â”‚    â”‚
â”‚    â”‚  â”‚  - Simple predictions                      â”‚     â”‚    â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚              AI Decision Flow                        â”‚    â”‚
â”‚    â”‚                                                       â”‚    â”‚
â”‚    â”‚  User Query                                          â”‚    â”‚
â”‚    â”‚     â”‚                                                 â”‚    â”‚
â”‚    â”‚     â”œâ”€â†’ Intent Detection                            â”‚    â”‚
â”‚    â”‚     â”‚    â””â”€â†’ Classify: billing/service/general      â”‚    â”‚
â”‚    â”‚     â”‚                                                 â”‚    â”‚
â”‚    â”‚     â”œâ”€â†’ Load Customer Context                       â”‚    â”‚
â”‚    â”‚     â”‚    â””â”€â†’ History, patterns, open tickets        â”‚    â”‚
â”‚    â”‚     â”‚                                                 â”‚    â”‚
â”‚    â”‚     â”œâ”€â†’ Sentiment Analysis                          â”‚    â”‚
â”‚    â”‚     â”‚    â””â”€â†’ Urgency, emotion, tone                 â”‚    â”‚
â”‚    â”‚     â”‚                                                 â”‚    â”‚
â”‚    â”‚     â”œâ”€â†’ Proactive Check                             â”‚    â”‚
â”‚    â”‚     â”‚    â””â”€â†’ Can we resolve without ticket?         â”‚    â”‚
â”‚    â”‚     â”‚                                                 â”‚    â”‚
â”‚    â”‚     â”œâ”€â†’ Generate Response                           â”‚    â”‚
â”‚    â”‚     â”‚    â”œâ”€â†’ OpenAI (if available)                  â”‚    â”‚
â”‚    â”‚     â”‚    â””â”€â†’ Rule-based (fallback)                  â”‚    â”‚
â”‚    â”‚     â”‚                                                 â”‚    â”‚
â”‚    â”‚     â”œâ”€â†’ Confidence Scoring                          â”‚    â”‚
â”‚    â”‚     â”‚    â””â”€â†’ >0.8: Handle automatically             â”‚    â”‚
â”‚    â”‚     â”‚    â””â”€â†’ <0.8: Escalate to human                â”‚    â”‚
â”‚    â”‚     â”‚                                                 â”‚    â”‚
â”‚    â”‚     â””â”€â†’ Log Interaction                             â”‚    â”‚
â”‚    â”‚          â””â”€â†’ Learn from feedback                     â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AI Capabilities Matrix

| Capability | Technology | Accuracy | Fallback | Status |
|------------|-----------|----------|----------|--------|
| Intent Detection | Keyword + OpenAI | 85-95% | Rule-based | âœ… Implemented |
| Bill Prediction | Time-series + OpenAI | 80-90% | Moving average | âœ… Implemented |
| Sentiment Analysis | NLP keywords | 70-85% | Neutral tone | âœ… Implemented |
| Empathy Response | Template + OpenAI | 90%+ | Templates | âœ… Implemented |
| Duplicate Detection | Exact match | 100% | None | âœ… Implemented |
| Proactive Guidance | Rules + OpenAI | 75-90% | Generic advice | âœ… Implemented |
| Knowledge Graph | Static mapping | 95% | None | âœ… Implemented |
| Voice Recognition | Web Speech API | 85-95% | Text input | âœ… Implemented |
| Text-to-Speech | Browser TTS | 95% | Text only | âœ… Implemented |

---

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SECURITY ARCHITECTURE                       â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Authentication Flow                        â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  User â†’ Login (email + password)                       â”‚    â”‚
â”‚  â”‚     â”‚                                                   â”‚    â”‚
â”‚  â”‚     â”œâ”€â†’ [1] Credential Validation                     â”‚    â”‚
â”‚  â”‚     â”‚      - bcrypt hash comparison (10 salt rounds)   â”‚    â”‚
â”‚  â”‚     â”‚      - Stored hash: $2b$10$...                   â”‚    â”‚
â”‚  â”‚     â”‚                                                   â”‚    â”‚
â”‚  â”‚     â”œâ”€â†’ [2] MFA Challenge                              â”‚    â”‚
â”‚  â”‚     â”‚      - Generate 6-digit OTP                      â”‚    â”‚
â”‚  â”‚     â”‚      - 5-minute expiration                       â”‚    â”‚
â”‚  â”‚     â”‚      - Store in memory (no DB persistence)       â”‚    â”‚
â”‚  â”‚     â”‚      - Send via email (Nodemailer)               â”‚    â”‚
â”‚  â”‚     â”‚      - Demo bypass: "000000"                     â”‚    â”‚
â”‚  â”‚     â”‚                                                   â”‚    â”‚
â”‚  â”‚     â”œâ”€â†’ [3] OTP Verification                           â”‚    â”‚
â”‚  â”‚     â”‚      - Validate code + timestamp                 â”‚    â”‚
â”‚  â”‚     â”‚      - Rate limiting: 60s cooldown               â”‚    â”‚
â”‚  â”‚     â”‚      - Max 3 attempts                            â”‚    â”‚
â”‚  â”‚     â”‚                                                   â”‚    â”‚
â”‚  â”‚     â””â”€â†’ [4] Token Issuance                             â”‚    â”‚
â”‚  â”‚          - JWT access token (8 hours)                  â”‚    â”‚
â”‚  â”‚          - JWT refresh token (7 days)                  â”‚    â”‚
â”‚  â”‚          - Payload: {userId, email, customerId}        â”‚    â”‚
â”‚  â”‚          - HS256 signature                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Authorization & Access Control             â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  All API requests (except auth):                       â”‚    â”‚
â”‚  â”‚     â”‚                                                   â”‚    â”‚
â”‚  â”‚     â”œâ”€â†’ Header: Authorization: Bearer <JWT>            â”‚    â”‚
â”‚  â”‚     â”‚                                                   â”‚    â”‚
â”‚  â”‚     â”œâ”€â†’ Middleware validation:                         â”‚    â”‚
â”‚  â”‚     â”‚    - Token signature verification                â”‚    â”‚
â”‚  â”‚     â”‚    - Expiration check                            â”‚    â”‚
â”‚  â”‚     â”‚    - User context extraction                     â”‚    â”‚
â”‚  â”‚     â”‚                                                   â”‚    â”‚
â”‚  â”‚     â””â”€â†’ Route access granted                           â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Future: Role-Based Access Control (RBAC)             â”‚    â”‚
â”‚  â”‚    - Customer role (default)                           â”‚    â”‚
â”‚  â”‚    - Agent role (back-office)                          â”‚    â”‚
â”‚  â”‚    - Admin role (analytics, settings)                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                  Data Security                          â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚  Encryption                                   â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                               â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  - Passwords: bcrypt (cost factor 10)        â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  - JWT tokens: HS256 signature                â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  - HTTPS/TLS in production                   â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                               â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Future:                                      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  - PII encryption at rest (AES-256)          â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  - Azure Key Vault for secrets               â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  - TDE for database                          â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚  Secrets Management                          â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                               â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Current: .env file                          â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  - OPENAI_API_KEY                            â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  - JWT_SECRET                                â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  - EMAIL_USER / EMAIL_PASSWORD               â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                               â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  .env.example provided (no secrets)          â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  .gitignore: .env excluded                   â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                               â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Production:                                  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  - Azure Key Vault                           â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  - AWS Secrets Manager                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  - Kubernetes Secrets                        â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Audit & Logging                            â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Winston Logger (structured JSON):                     â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  - Request logs: IP, user agent, endpoint              â”‚    â”‚
â”‚  â”‚  - Error logs: Stack traces, context                   â”‚    â”‚
â”‚  â”‚  - AI interactions: Query, response, confidence        â”‚    â”‚
â”‚  â”‚  - Authentication events: Login, OTP, logout           â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Files:                                                 â”‚    â”‚
â”‚  â”‚  - error.log (errors only)                             â”‚    â”‚
â”‚  â”‚  - combined.log (all events)                           â”‚    â”‚
â”‚  â”‚  - ai-logs.json (AI interactions)                      â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Future: Immutable audit trail                         â”‚    â”‚
â”‚  â”‚  - Write-once storage                                  â”‚    â”‚
â”‚  â”‚  - Compliance-ready (SOC2, GDPR)                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Security Headers & CORS                    â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  CORS Configuration:                                    â”‚    â”‚
â”‚  â”‚  - Origin: http://localhost:5173 (dev)                â”‚    â”‚
â”‚  â”‚  - Credentials: true                                   â”‚    â”‚
â”‚  â”‚  - Methods: GET, POST, PUT, DELETE                     â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Future Security Headers:                              â”‚    â”‚
â”‚  â”‚  - Helmet.js (XSS, CSP, HSTS)                         â”‚    â”‚
â”‚  â”‚  - Rate limiting (express-rate-limit)                 â”‚    â”‚
â”‚  â”‚  - CSRF protection                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment Architecture

### Current: Docker Development

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DOCKER DEPLOYMENT (Current)                    â”‚
â”‚                                                                  â”‚
â”‚  docker-compose.yml                                              â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Frontend Container                         â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Image: node:18-alpine                                 â”‚    â”‚
â”‚  â”‚  Build: ./frontend/Dockerfile                          â”‚    â”‚
â”‚  â”‚  Port: 5173:5173                                       â”‚    â”‚
â”‚  â”‚  Command: npm run dev                                  â”‚    â”‚
â”‚  â”‚  Volumes:                                               â”‚    â”‚
â”‚  â”‚    - ./frontend:/app                                   â”‚    â”‚
â”‚  â”‚    - /app/node_modules                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Backend Container                          â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Image: node:18-alpine                                 â”‚    â”‚
â”‚  â”‚  Build: ./backend/Dockerfile                           â”‚    â”‚
â”‚  â”‚  Port: 3001:3001                                       â”‚    â”‚
â”‚  â”‚  Command: npm run dev                                  â”‚    â”‚
â”‚  â”‚  Environment:                                           â”‚    â”‚
â”‚  â”‚    - NODE_ENV=development                              â”‚    â”‚
â”‚  â”‚    - PORT=3001                                         â”‚    â”‚
â”‚  â”‚    - FRONTEND_URL=http://localhost:5173                â”‚    â”‚
â”‚  â”‚  Volumes:                                               â”‚    â”‚
â”‚  â”‚    - ./backend:/app                                    â”‚    â”‚
â”‚  â”‚    - ./data:/app/data                                  â”‚    â”‚
â”‚  â”‚    - /app/node_modules                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Shared Volume                              â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  ./data (mounted to backend)                           â”‚    â”‚
â”‚  â”‚    - customers.json                                    â”‚    â”‚
â”‚  â”‚    - tickets.json                                      â”‚    â”‚
â”‚  â”‚    - ai-logs.json                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Production: Azure Cloud (Recommended)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  AZURE PRODUCTION DEPLOYMENT                     â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Azure Front Door                           â”‚    â”‚
â”‚  â”‚  - Global load balancing                               â”‚    â”‚
â”‚  â”‚  - SSL/TLS termination                                 â”‚    â”‚
â”‚  â”‚  - WAF protection                                      â”‚    â”‚
â”‚  â”‚  - CDN for static assets                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                     â”‚                                            â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚         â”‚           â”‚           â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  Azure     â”‚ â”‚ Azure   â”‚ â”‚  Azure      â”‚                   â”‚
â”‚  â”‚  Static    â”‚ â”‚ App     â”‚ â”‚  Functions  â”‚                   â”‚
â”‚  â”‚  Web Apps  â”‚ â”‚ Service â”‚ â”‚  (Future)   â”‚                   â”‚
â”‚  â”‚            â”‚ â”‚         â”‚ â”‚             â”‚                   â”‚
â”‚  â”‚  Frontend  â”‚ â”‚ Backend â”‚ â”‚ Serverless  â”‚                   â”‚
â”‚  â”‚  (React)   â”‚ â”‚ (Node)  â”‚ â”‚ Processing  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                      â”‚                                           â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚         â”‚            â”‚            â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  Azure     â”‚ â”‚ Azure    â”‚ â”‚  Azure         â”‚               â”‚
â”‚  â”‚  Cosmos DB â”‚ â”‚ Redis    â”‚ â”‚  Cognitive     â”‚               â”‚
â”‚  â”‚            â”‚ â”‚ Cache    â”‚ â”‚  Services      â”‚               â”‚
â”‚  â”‚  Document  â”‚ â”‚          â”‚ â”‚  (OpenAI Alt)  â”‚               â”‚
â”‚  â”‚  Storage   â”‚ â”‚ Session  â”‚ â”‚                â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Supporting Services                        â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  - Azure Key Vault (Secrets)                           â”‚    â”‚
â”‚  â”‚  - Application Insights (Monitoring)                   â”‚    â”‚
â”‚  â”‚  - Azure Monitor (Logging)                             â”‚    â”‚
â”‚  â”‚  - Azure DevOps (CI/CD)                                â”‚    â”‚
â”‚  â”‚  - Azure AD B2C (Authentication)                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Integration Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXTERNAL INTEGRATIONS                         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              OpenAI API (GPT-3.5-turbo)                 â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Purpose:                                               â”‚    â”‚
â”‚  â”‚  - Advanced consumption analysis                       â”‚    â”‚
â”‚  â”‚  - Bill prediction (ML-enhanced)                       â”‚    â”‚
â”‚  â”‚  - Personalized recommendations                        â”‚    â”‚
â”‚  â”‚  - Natural language understanding                      â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Configuration:                                         â”‚    â”‚
â”‚  â”‚  - API Key: process.env.OPENAI_API_KEY                â”‚    â”‚
â”‚  â”‚  - Model: gpt-3.5-turbo                               â”‚    â”‚
â”‚  â”‚  - Temperature: 0.7                                    â”‚    â”‚
â”‚  â”‚  - Max tokens: 500                                     â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Fallback: Rule-based AI (local algorithms)           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Email Service (Nodemailer)                 â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Purpose:                                               â”‚    â”‚
â”‚  â”‚  - OTP delivery for MFA                                â”‚    â”‚
â”‚  â”‚  - Password reset emails (future)                      â”‚    â”‚
â”‚  â”‚  - Ticket notifications (future)                       â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Configuration:                                         â”‚    â”‚
â”‚  â”‚  - SMTP: Gmail (dev), SendGrid (prod)                 â”‚    â”‚
â”‚  â”‚  - From: noreply@dewa.gov.ae                          â”‚    â”‚
â”‚  â”‚  - Templates: HTML with bilingual support             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              DEWA Payment Portal (Iframe)               â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  URL: https://www.dewa.gov.ae/consumer/billing/easypayâ”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Integration:                                           â”‚    â”‚
â”‚  â”‚  - Embedded iframe with sandbox                        â”‚    â”‚
â”‚  â”‚  - No credential storage                               â”‚    â”‚
â”‚  â”‚  - Secure boundary isolation                           â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Future: API Integration                               â”‚    â”‚
â”‚  â”‚  - Direct payment API calls                            â”‚    â”‚
â”‚  â”‚  - Payment status webhooks                             â”‚    â”‚
â”‚  â”‚  - Transaction history sync                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Future Integrations                        â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  - DEWA CRM System (Customer master data)             â”‚    â”‚
â”‚  â”‚  - DEWA Billing System (Real-time consumption)        â”‚    â”‚
â”‚  â”‚  - DEWA Outage Management (Service alerts)            â”‚    â”‚
â”‚  â”‚  - SMS Gateway (OTP alternative)                       â”‚    â”‚
â”‚  â”‚  - Mobile Push Notifications                           â”‚    â”‚
â”‚  â”‚  - WhatsApp Business API                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Scalability & Performance

### Performance Metrics

| Metric | Target | Current | Strategy |
|--------|--------|---------|----------|
| API Response Time | <500ms | 150-300ms | âœ… Achieved |
| Frontend Load Time | <2s | 1.5s | âœ… Achieved |
| OpenAI API Latency | <2s | 1-3s | Caching planned |
| Concurrent Users | 1000+ | 10-50 (dev) | Horizontal scaling |
| Database Query Time | <100ms | 50ms | JSON â†’ SQL migration |
| AI Prediction Time | <1s | 500ms | âœ… Achieved |

### Scalability Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SCALABILITY ROADMAP                           â”‚
â”‚                                                                  â”‚
â”‚  Phase 1: MVP (Current)                                         â”‚
â”‚  - Single server deployment                                     â”‚
â”‚  - JSON file storage                                            â”‚
â”‚  - 10-50 concurrent users                                       â”‚
â”‚                                                                  â”‚
â”‚  Phase 2: Production (1-2 weeks)                                â”‚
â”‚  - Load balancer (Azure Front Door)                            â”‚
â”‚  - Database migration (Cosmos DB/PostgreSQL)                   â”‚
â”‚  - Redis caching layer                                         â”‚
â”‚  - 1000+ concurrent users                                       â”‚
â”‚                                                                  â”‚
â”‚  Phase 3: Scale (1-2 months)                                    â”‚
â”‚  - Microservices architecture                                   â”‚
â”‚  - Kubernetes orchestration                                     â”‚
â”‚  - CDN for static assets                                       â”‚
â”‚  - 10,000+ concurrent users                                     â”‚
â”‚                                                                  â”‚
â”‚  Phase 4: Enterprise (3-6 months)                               â”‚
â”‚  - Multi-region deployment                                      â”‚
â”‚  - Disaster recovery                                            â”‚
â”‚  - Auto-scaling                                                 â”‚
â”‚  - 100,000+ concurrent users                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technology Stack

### Frontend Stack

| Layer | Technology | Version | Purpose |
|-------|-----------|---------|---------|
| **Framework** | React | 18.2.0 | UI library |
| **Build Tool** | Vite | 5.0.11 | Fast HMR, bundling |
| **Router** | React Router | 6.x | Client-side routing |
| **HTTP Client** | Axios | 1.x | API communication |
| **Charts** | Recharts | 2.x | Data visualization |
| **i18n** | react-i18next | 13.x | Bilingual support |
| **Styling** | Tailwind CSS | 3.x | Utility-first CSS |
| **RTL Support** | tailwindcss-rtl | 0.9.x | Arabic layout |
| **Icons** | Emoji | Native | Visual elements |
| **State** | React Context | Built-in | Global state |

### Backend Stack

| Layer | Technology | Version | Purpose |
|-------|-----------|---------|---------|
| **Runtime** | Node.js | 18+ | JavaScript runtime |
| **Framework** | Express.js | 4.x | Web server |
| **Language** | ES Modules | ES6+ | Modern JavaScript |
| **Authentication** | JWT | 9.x | Token-based auth |
| **Password** | bcrypt | 5.x | Password hashing |
| **Email** | Nodemailer | 6.x | Email delivery |
| **Logging** | Winston | 3.x | Structured logging |
| **AI/ML** | OpenAI | 4.x | GPT-3.5-turbo |
| **CORS** | cors | 2.x | Cross-origin requests |
| **Env** | dotenv | 16.x | Environment variables |

### DevOps Stack

| Tool | Purpose | Status |
|------|---------|--------|
| **Docker** | Containerization | âœ… Implemented |
| **docker-compose** | Local orchestration | âœ… Implemented |
| **npm** | Package management | âœ… Implemented |
| **Git** | Version control | âœ… Implemented |
| **GitHub** | Code repository | âœ… Implemented |
| **VS Code** | Development IDE | âœ… Recommended |

### Future Stack (Production)

| Tool | Purpose | Timeline |
|------|---------|----------|
| **Terraform/Bicep** | Infrastructure as Code | 1-2 weeks |
| **GitHub Actions** | CI/CD pipeline | 1-2 weeks |
| **PostgreSQL** | Relational database | 1 week |
| **Redis** | Caching layer | 1 week |
| **Azure AD B2C** | Enterprise SSO | 2-3 weeks |
| **Application Insights** | Monitoring | 1 week |
| **Kubernetes** | Container orchestration | 1-2 months |

---

## Architecture Principles & Best Practices

### Design Principles

1. **Separation of Concerns**
   - Frontend: Presentation logic only
   - Backend: Business logic + data access
   - AI Layer: Intelligence + orchestration

2. **Modularity**
   - Each AI module is independent
   - Routes are self-contained
   - Services are reusable

3. **Fail-Safe Defaults**
   - OpenAI unavailable â†’ Rule-based AI
   - Database error â†’ Cached data
   - Network timeout â†’ User-friendly error

4. **Security First**
   - MFA on all accounts
   - JWT token validation
   - Audit logging
   - HTTPS in production

5. **Performance**
   - Lazy loading components
   - API response caching
   - Optimized queries
   - CDN for static assets

6. **Maintainability**
   - Clear folder structure
   - Consistent naming conventions
   - Comprehensive documentation
   - Error handling everywhere

---

## Conclusion

TheAIColab represents a modern, scalable architecture for AI-powered customer support. The system is:

- âœ… **Production-Ready MVP**: Core features implemented and tested
- âœ… **AI-First**: Intelligent automation at every layer
- âœ… **Bilingual**: Native English/Arabic support
- âœ… **Secure**: MFA, JWT, audit logging
- âœ… **Scalable**: Clear path from MVP to enterprise
- âœ… **Well-Documented**: Comprehensive architecture documentation

### Next Steps

1. **Immediate** (This Week):
   - Security hardening (Azure AD B2C)
   - Database migration (PostgreSQL)
   - Automated testing

2. **Short-term** (2-3 Weeks):
   - Production deployment (Azure)
   - CI/CD pipeline
   - Monitoring setup

3. **Medium-term** (1-2 Months):
   - Microservices refactor
   - Kubernetes deployment
   - Advanced analytics

---

**Document Owner**: TheAIColab Development Team  
**Last Updated**: January 28, 2026  
**Version**: 1.0  
**Status**: Complete âœ…
